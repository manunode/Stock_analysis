<nav class="bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm">
    <div class="max-w-[1400px] mx-auto px-4 sm:px-6">
        <div class="flex items-center justify-between h-14">
            <!-- Logo -->
            <a href="/" class="flex items-center gap-2 font-bold text-lg text-emerald-600 hover:text-emerald-700">
                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M2 10a8 8 0 018-8v8h8a8 8 0 11-16 0z"/><path d="M12 2.252A8.014 8.014 0 0117.748 8H12V2.252z"/></svg>
                {{ APP_TITLE }}
            </a>

            <!-- Desktop nav links -->
            <div class="hidden md:flex items-center gap-1">
                <a href="/" class="px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100">Home</a>
                <a href="/screener" class="px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100">Screener</a>
                <a href="/sectors" class="px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100">Sectors</a>
                <a href="/compare" class="px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100">Compare</a>
            </div>

            <!-- Search -->
            <div class="relative" x-data="searchWidget()" @click.outside="results = []">
                <input type="text"
                       x-model="query"
                       @input.debounce.300ms="search()"
                       @focus="if(query.length > 0) search()"
                       placeholder="Search stock..."
                       class="w-48 sm:w-64 px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none">
                <div x-show="results.length > 0" x-cloak
                     class="absolute right-0 mt-1 w-80 bg-white rounded-lg shadow-xl border border-gray-200 max-h-96 overflow-y-auto z-50">
                    <template x-for="r in results" :key="r.nse_code">
                        <a :href="'/stock/' + r.nse_code"
                           class="flex items-center justify-between px-4 py-2.5 hover:bg-gray-50 border-b border-gray-100 last:border-0">
                            <div>
                                <div class="font-semibold text-sm" x-text="r.nse_code"></div>
                                <div class="text-xs text-gray-500" x-text="r.stock_name"></div>
                            </div>
                            <div class="text-right">
                                <div class="text-xs text-gray-400" x-text="r.sector"></div>
                                <span class="inline-block px-1.5 py-0.5 text-xs rounded font-medium"
                                      :class="r.score_band === 'A' ? 'bg-emerald-100 text-emerald-800' :
                                              r.score_band === 'B' ? 'bg-blue-100 text-blue-800' :
                                              r.score_band === 'C' ? 'bg-yellow-100 text-yellow-800' :
                                              'bg-gray-100 text-gray-600'"
                                      x-text="r.composite_score ? (r.composite_score + ' / ' + r.score_band) : '--'"></span>
                            </div>
                        </a>
                    </template>
                </div>
            </div>

            <!-- Mobile menu button -->
            <button @click="mobileMenu = !mobileMenu" class="md:hidden p-2 rounded-md text-gray-400 hover:text-gray-600">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                </svg>
            </button>
        </div>

        <!-- Mobile menu -->
        <div x-show="mobileMenu" x-cloak class="md:hidden pb-3 border-t border-gray-100 mt-1 pt-2">
            <a href="/" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded">Home</a>
            <a href="/screener" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded">Screener</a>
            <a href="/sectors" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded">Sectors</a>
            <a href="/compare" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded">Compare</a>
        </div>
    </div>
</nav>
